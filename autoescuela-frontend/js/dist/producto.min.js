"use strict";var _datosProductos,_datosTipos;function eliminarExitoso(o,t,a){$("#eliminarProducto").modal("hide"),o.Success?($(t.currentTarget).closest("tr").remove(),_datosProductos.remove(a),toastr.success("El Producto'"+a.nombre+" '   se ha eliminado satisfactoriamente")):toastr.error(o.Mensaje)}function confirmarEliminar(t,a){var o={idproducto:a.idproducto};solicitudAjax("producto/EliminarProducto",function(o){eliminarExitoso(o,t,a)},o,"JSON","POST")}function editarDatos(o){$("#txtNombre").val(o.nombre),$("#txtDescripcion").val(o.descripcion),$("#txtPrecio").val(o.precio),$("#txtCantidad").val(o.cantidad),$("#cmbTipo").val(o.idtipo),$("#btnEditar").show(),$("#btnGuardar").hide()}function eventoActualizarProducto(o,t){$(o).unbind("click").click(function(){var o="#agregarProducto";editarDatos(t),$(o).find(".modal-title").html("Editar Producto : '"+t.nombre+"'"),$(o).find(".modal-dialog").css({width:"700px"}),$(o).modal({backdrop:"static",keyboard:!1}),$(o).modal("show"),$("#btnEditar").unbind("click").click(function(o){o.preventDefault(),guardarProducto(t.idproducto,t)})})}function mostrarEliminarProducto(o,t){var a="#eliminarProducto";$(a).find(".modal-title").html("Eliminar Producto"),$(a).find(".text-mensaje-modal").html("Esta seguro que desea eliminar el Producto '"+t.nombre+"'    ?"),$(a).find(".modal-body").css({"min-height":"100px"}),$(a).modal({backdrop:"static",keyboard:!1}),$(a).modal("show"),$("#btnConfirmarEliminar").unbind("click").click(function(){confirmarEliminar(o,t)})}function guardarProductoExitoso(o,t){if(o.Success){if($("#agregarProducto").modal("hide"),t)t.nombre=$("#txtNombre").val(),t.descripcion=$("#txtDescripcion").val(),t.precio=$("#txtPrecio").val(),t.cantidad=$("#txtCantidad").val(),t.idtipo=$("#cmbTipo").val(),t.tipo=$("#cmbTipo option:selected").html();else{var a={idproducto:parseInt(o.Data),nombre:$("#txtNombre").val(),descripcion:$("#txtDescripcion").val(),precio:$("#txtPrecio").val(),cantidad:$("#txtCantidad").val(),idtipo:$("#cmbTipo").val(),tipo:$("#cmbTipo option:selected").html()};_datosProductos.push(a)}mostrarDatosProductos(),toastr.success("El Producto se ha guardado satisfactoriamente ")}else toastr.error(o.Mensaje)}function guardarProducto(o,t){var a={idproducto:o,nombre:$("#txtNombre").val(),descripcion:$("#txtDescripcion").val(),precio:$("#txtPrecio").val(),cantidad:$("#txtCantidad").val(),idtipo:$("#cmbTipo").val()};solicitudAjax("producto/GuardarProducto",function(o){guardarProductoExitoso(o,t)},a,"JSON","POST")}function limpiarDatos(){$("#txtNombre").val(""),$("#txtDescripcion").val(""),$("#txtPrecio").val(""),$("#txtCantidad").val(""),$("#btnEditar").hide(),$("#btnGuardar").show()}function mostrarModalProducto(){limpiarDatos();var o="#agregarProducto";$(o).find(".modal-title").html("Adicionar Producto"),$(o).find(".modal-dialog").css({width:"700px"}),$(o).find(".modal-body").css({"min-height":"150px"}),$(o).modal({backdrop:"static",keyboard:!1}),$(o).modal("show")}function mostrarDatosProductos(){limpiarTabla("tblProducto"),$.each(_datosProductos,function(o,t){var a=$("<tr>").attr("id",t.idproducto);a.append(col(t.idproducto).addClass("alinearCentro"));var i=crearSpan("lblEdit"+o,"spanHyperLink",t.nombre);eventoActualizarProducto(i,t),a.append(col(i)),a.append(col(t.descripcion)),a.append(col(t.precio)),a.append(col(t.cantidad)),a.append(col(t.tipo)),a.append(col(AccionColumna(function(o){mostrarEliminarProducto(o,t)},"trash","Eliminar")).addClass("alinearCentro")),$("#tblProducto tbody").append(a)})}function cargarComboTipos(){adicionarOpcionesCombo($("#cmbTipo"),_datosTipos,null,{id:"idtipo",value:"nombre"})}function getProductosExitoso(o){o.Success?(toastr.success("Cargado Exitoso"),_datosProductos=o.Data.Productos,_datosTipos=o.Data.Tipos,mostrarDatosProductos(),cargarComboTipos()):toastr.error(o.Mensaje)}function init(){solicitudAjax("producto/obtenerProductos",getProductosExitoso,{},"JSON","GET")}$(document).ready(function(){init(),$("#btnAdicionar").click(function(){mostrarModalProducto()}),$("#btnCancelar").click(function(){$("#agregarProducto").modal("hide")}),$("#btnGuardar").click(function(){guardarProducto(0)}),$("#btnCancelarEliminar").click(function(){$("#eliminarProducto").modal("hide")})});
//# sourceMappingURL=producto.min.js.map
