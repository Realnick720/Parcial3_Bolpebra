{"version":3,"sources":["vehiculo.js"],"names":["_datosVehiculos","_datosTipos","eliminarExitoso","resultado","e","elemento","modal","Success","$","remove","toastr","success","marca","error","Mensaje","confirmarEliminar","datos","id_vehiculo","solicitudAjax","response","url","val","tipoDatos","modelo","placa","anio","transmision","id_tipovehiculo","show","eventoActualizarVehiculo","input","unbind","editarDatos","find","html","hide","css","width","backdrop","keyboard","click","event","preventDefault","guardarVehiculo","respuesta","color","tipo","parseInt","Data","guardarVehiculoExitoso","push","vehiculo","limpiarDatos","mostrarModalVehiculo","min-height","mostrarDatosVehiculos","limpiarTabla","each","index","fila","attr","append","col","addClass","crearSpan","AccionColumna","mostrarEliminarVehiculo","cargarComboTipos","id","value","getVehiculosExitoso","Vehiculos","Tipos"],"mappings":"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","file":"vehiculo.min.js","sourcesContent":["var _datosVehiculos;\r\nvar _datosTipos;\r\n\r\nfunction eliminarExitoso(resultado, e, elemento) {\r\n    $(\"#eliminarVehiculo\").modal(\"hide\");\r\n    if (resultado.Success) {\r\n        $(e.currentTarget).closest('tr').remove();\r\n        _datosVehiculos.remove(elemento);\r\n        toastr.success(\"El Vehiculo'\" + elemento.marca + \r\n            \" '   se ha eliminado satisfactoriamente\");\r\n    } else {\r\n        toastr.error(resultado.Mensaje);\r\n    }\r\n}\r\n\r\nfunction confirmarEliminar(e, elemento) {\r\n    var url = \"vehiculo/EliminarVehiculo\";\r\n    var tipo = 'POST';\r\n    var datos = { id_vehiculo: elemento.id_vehiculo };\r\n    var tipoDatos = 'JSON';\r\n    solicitudAjax(url, function (response) { eliminarExitoso(response, e, elemento); }\r\n    , datos, tipoDatos, tipo);\r\n}\r\n\r\nfunction editarDatos(elemento) {\r\n    $(\"#txtMarca\").val(elemento.marca);\r\n    $(\"#txtModelo\").val(elemento.modelo);\r\n    $(\"#txtColor\").val(elemento.color);\r\n    $(\"#txtPlaca\").val(elemento.placa);\r\n    $(\"#txtAnio\").val(elemento.anio);\r\n    $(\"#txtTransmision\").val(elemento.transmision);\r\n    $(\"#cmbTipo\").val(elemento.id_tipovehiculo);\r\n    $(\"#btnEditar\").show();\r\n    $(\"#btnGuardar\").hide();\r\n}\r\n\r\nfunction eventoActualizarVehiculo(input, elemento) {\r\n    $(input).unbind('click').click(function () {\r\n        var modal = '#agregarVehiculo';\r\n        editarDatos(elemento);\r\n        $(modal).find(\".modal-title\").html('Editar Vehiculo : ' + \"'\" + \r\n            elemento.marca + \"'\");\r\n        $(modal).find(\".modal-dialog\").css({ 'width': 700 + \"px\" });\r\n        $(modal).modal({ backdrop: 'static', keyboard: false });\r\n        $(modal).modal(\"show\");\r\n        $(\"#btnEditar\").unbind('click').click(function (event) {\r\n            event.preventDefault();\r\n            guardarVehiculo(elemento.id_vehiculo, elemento);\r\n        });\r\n    });\r\n}\r\n\r\nfunction mostrarEliminarVehiculo(e, elemento) {\r\n    var modal = '#eliminarVehiculo';\r\n    $(modal).find(\".modal-title\").html('Eliminar Vehiculo');\r\n    $(modal).find(\".text-mensaje-modal\").html('Esta seguro que desea eliminar el Vehiculo '\r\n        + \"'\" + elemento.marca + \"'    ?\");\r\n    $(modal).find(\".modal-body\").css({ 'min-height': 100 + \"px\" });    \r\n    $(modal).modal({ backdrop: 'static', keyboard: false });\r\n    $(modal).modal(\"show\");\r\n    $(\"#btnConfirmarEliminar\").unbind('click').click(function () {\r\n        confirmarEliminar(e, elemento);\r\n    });    \r\n}\r\n\r\nfunction guardarVehiculoExitoso(respuesta, elemento) {\r\n    if (respuesta.Success) {\r\n        $(\"#agregarVehiculo\").modal(\"hide\");\r\n        if (elemento) {\r\n            elemento.marca = $(\"#txtMarca\").val();\r\n            elemento.modelo = $(\"#txtModelo\").val();\r\n            elemento.color = $(\"#txtColor\").val();\r\n            elemento.placa = $(\"#txtPlaca\").val();\r\n            elemento.anio = $(\"#txtAnio\").val();\r\n            elemento.id_tipovehiculo = $(\"#cmbTipo\").val();\r\n            elemento.tipo = $(\"#cmbTipo option:selected\").html();\r\n        } else {\r\n            var vehiculo = {\r\n                id_vehiculo: parseInt(respuesta.Data),\r\n                marca: $(\"#txtMarca\").val(),\r\n                modelo: $(\"#txtModelo\").val(),\r\n                color: $(\"#txtColor\").val(),\r\n                placa: $(\"#txtPlaca\").val(),\r\n                anio: $(\"#txtAnio\").val(),\r\n                transmision: $(\"#txtTransmision\").val(),\r\n                id_tipovehiculo: $(\"#cmbTipo\").val(),\r\n                tipo: $(\"#cmbTipo option:selected\").html()\r\n            };\r\n            _datosVehiculos.push(vehiculo);\r\n        }            \r\n        mostrarDatosVehiculos();\r\n        toastr.success(\"El Vehiculo se ha guardado satisfactoriamente \");\r\n    } else {\r\n        toastr.error(respuesta.Mensaje);\r\n    }    \r\n}\r\n\r\nfunction guardarVehiculo(id_vehiculo, elemento) {\r\n    var url = \"vehiculo/GuardarVehiculo\";\r\n    var tipo = 'POST';\r\n    var datos = {\r\n        id_vehiculo: id_vehiculo,\r\n        marca: $(\"#txtMarca\").val(),\r\n        modelo: $(\"#txtModelo\").val(),\r\n        color: $(\"#txtColor\").val(),\r\n        placa: $(\"#txtPlaca\").val(),\r\n        anio: $(\"#txtAnio\").val(),\r\n        transmision: $(\"#txtTransmision\").val(),\r\n        id_tipovehiculo: $(\"#cmbTipo\").val(),\r\n    };\r\n    var tipoDatos = 'JSON';\r\n    solicitudAjax(url, function (response) { guardarVehiculoExitoso(response, elemento); }\r\n        , datos, tipoDatos, tipo);\r\n}\r\n\r\nfunction limpiarDatos() {\r\n    $(\"#txtMarca\").val(\"\");\r\n    $(\"#txtModelo\").val(\"\");\r\n    $(\"#txtColor\").val(\"\");\r\n    $(\"#txtPlaca\").val(\"\");\r\n    $(\"#txtAnio\").val(\"\");\r\n    $(\"#txtTransmision\").val(\"\");\r\n    $(\"#btnEditar\").hide();\r\n    $(\"#btnGuardar\").show();\r\n}\r\nfunction mostrarModalVehiculo() {\r\n    limpiarDatos();\r\n    var modal = '#agregarVehiculo';    \r\n    $(modal).find(\".modal-title\").html(\"Adicionar Vehiculo\");\r\n    $(modal).find(\".modal-dialog\").css({ \"width\": 700 + \"px\" });\r\n    $(modal).find(\".modal-body\").css({ 'min-height': 150 + \"px\" });\r\n    $(modal).modal({ backdrop: 'static', keyboard: false });\r\n    $(modal).modal(\"show\");\r\n}\r\nfunction mostrarDatosVehiculos() {\r\n    limpiarTabla('tblVehiculo');\r\n    $.each(_datosVehiculos, function (index, elemento) {\r\n        var fila = $('<tr>').attr('id', elemento.id_vehiculo);\r\n        fila.append(col(elemento.id_vehiculo).addClass(\"alinearCentro\"));\r\n        var input = crearSpan(\"lblEdit\" + index, \"spanHyperLink\", elemento.marca);\r\n        eventoActualizarVehiculo(input, elemento);\r\n        fila.append(col(input));\r\n        fila.append(col(elemento.modelo ));\r\n        fila.append(col(elemento.color ));\r\n        fila.append(col(elemento.placa ));\r\n        fila.append(col(elemento.anio ));\r\n        fila.append(col(elemento.transmision ));\r\n        fila.append(col(elemento.tipo ));\r\n        fila.append(col(AccionColumna(function (e) { mostrarEliminarVehiculo(e, elemento) }\r\n            , 'trash', 'Eliminar')).addClass(\"alinearCentro\"));\r\n        $('#tblVehiculo tbody').append(fila);\r\n    });\r\n}\r\n\r\nfunction cargarComboTipos(){\r\n    var prop = {id: 'id_tipovehiculo', value: 'descripcion'};\r\n    adicionarOpcionesCombo($(\"#cmbTipo\"), _datosTipos, null,prop);\r\n}\r\n\r\nfunction getVehiculosExitoso(resultado) {\r\n    if (resultado.Success) {\r\n        toastr.success(\"Cargado Exitoso\");\r\n        _datosVehiculos = resultado.Data.Vehiculos;\r\n        _datosTipos = resultado.Data.Tipos;\r\n        mostrarDatosVehiculos();    \r\n        cargarComboTipos();    \r\n    } else {\r\n        toastr.error(resultado.Mensaje);\r\n    }\r\n}\r\nfunction init() {\r\n    var url = \"vehiculo/obtenerVehiculos\";\r\n    var tipo = 'GET';\r\n    var datos = {};\r\n    var tipoDatos = 'JSON';\r\n    solicitudAjax(url, getVehiculosExitoso, datos, tipoDatos, tipo);\r\n}\r\n$(document).ready(function () {\r\n    init();  \r\n    $('#btnAdicionar').click(function () { mostrarModalVehiculo(); });  \r\n    $('#btnCancelar').click(function () { $('#agregarVehiculo').modal(\"hide\"); });  \r\n    $(\"#btnGuardar\").click(function () { guardarVehiculo(0); });\r\n    $('#btnCancelarEliminar').click(function () { $(\"#eliminarVehiculo\").modal(\"hide\"); });    \r\n});"]}