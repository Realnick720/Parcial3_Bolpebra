{"version":3,"sources":["producto.js"],"names":["_datosProductos","_datosTipos","eliminarExitoso","resultado","e","elemento","modal","Success","$","remove","toastr","success","nombre","error","Mensaje","confirmarEliminar","datos","idproducto","solicitudAjax","response","url","val","tipoDatos","descripcion","idtipo","show","hide","eventoActualizarProducto","input","unbind","precio","editarDatos","find","html","css","width","backdrop","keyboard","click","event","preventDefault","guardarProducto","respuesta","cantidad","tipo","producto","Data","guardarProductoExitoso","push","parseInt","idProducto","mostrarDatosProductos","limpiarDatos","min-height","limpiarTabla","each","index","attr","fila","append","addClass","crearSpan","col","mostrarModalProducto","mostrarEliminarProducto","cargarComboTipos","adicionarOpcionesCombo","id","value","Productos","Tipos"],"mappings":"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","file":"producto.min.js","sourcesContent":["var _datosProductos;\r\nvar _datosTipos;\r\n\r\nfunction eliminarExitoso(resultado, e, elemento) {\r\n    $(\"#eliminarProducto\").modal(\"hide\");\r\n    if (resultado.Success) {\r\n        $(e.currentTarget).closest('tr').remove();\r\n        _datosProductos.remove(elemento);\r\n        toastr.success(\"El Producto'\" + elemento.nombre + \r\n            \" '   se ha eliminado satisfactoriamente\");\r\n    } else {\r\n        toastr.error(resultado.Mensaje);\r\n    }\r\n}\r\n\r\nfunction confirmarEliminar(e, elemento) {\r\n    var url = \"producto/EliminarProducto\";\r\n    var tipo = 'POST';\r\n    var datos = { idproducto: elemento.idproducto };\r\n    var tipoDatos = 'JSON';\r\n    solicitudAjax(url, function (response) { eliminarExitoso(response, e, elemento); }\r\n    , datos, tipoDatos, tipo);\r\n}\r\n\r\nfunction editarDatos(elemento) {\r\n    $(\"#txtNombre\").val(elemento.nombre);\r\n    $(\"#txtDescripcion\").val(elemento.descripcion);\r\n    $(\"#txtPrecio\").val(elemento.precio);\r\n    $(\"#txtCantidad\").val(elemento.cantidad);\r\n    $(\"#cmbTipo\").val(elemento.idtipo);\r\n    $(\"#btnEditar\").show();\r\n    $(\"#btnGuardar\").hide();\r\n}\r\n\r\nfunction eventoActualizarProducto(input, elemento) {\r\n    $(input).unbind('click').click(function () {\r\n        var modal = '#agregarProducto';\r\n        editarDatos(elemento);\r\n        $(modal).find(\".modal-title\").html('Editar Producto : ' + \"'\" + \r\n            elemento.nombre + \"'\");\r\n        $(modal).find(\".modal-dialog\").css({ 'width': 700 + \"px\" });\r\n        $(modal).modal({ backdrop: 'static', keyboard: false });\r\n        $(modal).modal(\"show\");\r\n        $(\"#btnEditar\").unbind('click').click(function (event) {\r\n            event.preventDefault();\r\n            guardarProducto(elemento.idproducto, elemento);\r\n        });\r\n    });\r\n}\r\n\r\nfunction mostrarEliminarProducto(e, elemento) {\r\n    var modal = '#eliminarProducto';\r\n    $(modal).find(\".modal-title\").html('Eliminar Producto');\r\n    $(modal).find(\".text-mensaje-modal\").html('Esta seguro que desea eliminar el Producto '\r\n        + \"'\" + elemento.nombre + \"'    ?\");\r\n    $(modal).find(\".modal-body\").css({ 'min-height': 100 + \"px\" });    \r\n    $(modal).modal({ backdrop: 'static', keyboard: false });\r\n    $(modal).modal(\"show\");\r\n    $(\"#btnConfirmarEliminar\").unbind('click').click(function () {\r\n        confirmarEliminar(e, elemento);\r\n    });    \r\n}\r\n\r\nfunction guardarProductoExitoso(respuesta, elemento) {\r\n    if (respuesta.Success) {\r\n        $(\"#agregarProducto\").modal(\"hide\");\r\n        if (elemento) {\r\n            elemento.nombre = $(\"#txtNombre\").val();\r\n            elemento.descripcion = $(\"#txtDescripcion\").val();\r\n            elemento.precio = $(\"#txtPrecio\").val();\r\n            elemento.cantidad = $(\"#txtCantidad\").val();\r\n            elemento.idtipo = $(\"#cmbTipo\").val();\r\n            elemento.tipo = $(\"#cmbTipo option:selected\").html();\r\n        } else {\r\n            var producto = {\r\n                idproducto: parseInt(respuesta.Data),\r\n                nombre: $(\"#txtNombre\").val(),\r\n                descripcion: $(\"#txtDescripcion\").val(),\r\n                precio: $(\"#txtPrecio\").val(),\r\n                cantidad: $(\"#txtCantidad\").val(),\r\n                idtipo: $(\"#cmbTipo\").val(),\r\n                tipo: $(\"#cmbTipo option:selected\").html()\r\n            };\r\n            _datosProductos.push(producto);\r\n        }            \r\n        mostrarDatosProductos();\r\n        toastr.success(\"El Producto se ha guardado satisfactoriamente \");\r\n    } else {\r\n        toastr.error(respuesta.Mensaje);\r\n    }    \r\n}\r\n\r\nfunction guardarProducto(idProducto, elemento) {\r\n    var url = \"producto/GuardarProducto\";\r\n    var tipo = 'POST';\r\n    var datos = {\r\n        idproducto: idProducto,\r\n        nombre: $(\"#txtNombre\").val(),\r\n        descripcion: $(\"#txtDescripcion\").val(),\r\n        precio: $(\"#txtPrecio\").val(),\r\n        cantidad: $(\"#txtCantidad\").val(),\r\n        idtipo: $(\"#cmbTipo\").val(),\r\n    };\r\n    var tipoDatos = 'JSON';\r\n    solicitudAjax(url, function (response) { guardarProductoExitoso(response, elemento); }\r\n        , datos, tipoDatos, tipo);\r\n}\r\n\r\nfunction limpiarDatos() {\r\n    $(\"#txtNombre\").val(\"\");\r\n    $(\"#txtDescripcion\").val(\"\");\r\n    $(\"#txtPrecio\").val(\"\");\r\n    $(\"#txtCantidad\").val(\"\");\r\n    $(\"#btnEditar\").hide();\r\n    $(\"#btnGuardar\").show();\r\n}\r\nfunction mostrarModalProducto() {\r\n    limpiarDatos();\r\n    var modal = '#agregarProducto';    \r\n    $(modal).find(\".modal-title\").html(\"Adicionar Producto\");\r\n    $(modal).find(\".modal-dialog\").css({ \"width\": 700 + \"px\" });\r\n    $(modal).find(\".modal-body\").css({ 'min-height': 150 + \"px\" });\r\n    $(modal).modal({ backdrop: 'static', keyboard: false });\r\n    $(modal).modal(\"show\");\r\n}\r\nfunction mostrarDatosProductos() {\r\n    limpiarTabla('tblProducto');\r\n    $.each(_datosProductos, function (index, elemento) {\r\n        var fila = $('<tr>').attr('id', elemento.idproducto);\r\n        fila.append(col(elemento.idproducto).addClass(\"alinearCentro\"));\r\n        var input = crearSpan(\"lblEdit\" + index, \"spanHyperLink\", elemento.nombre);\r\n        eventoActualizarProducto(input, elemento);\r\n        fila.append(col(input));\r\n        fila.append(col(elemento.descripcion ));\r\n        fila.append(col(elemento.precio ));\r\n        fila.append(col(elemento.cantidad ));\r\n        fila.append(col(elemento.tipo ));\r\n        fila.append(col(AccionColumna(function (e) { mostrarEliminarProducto(e, elemento) }\r\n            , 'trash', 'Eliminar')).addClass(\"alinearCentro\"));\r\n        $('#tblProducto tbody').append(fila);\r\n    });\r\n}\r\n\r\nfunction cargarComboTipos(){\r\n    var prop = {id: 'idtipo', value: 'nombre'};\r\n    adicionarOpcionesCombo($(\"#cmbTipo\"), _datosTipos, null,prop);\r\n}\r\n\r\nfunction getProductosExitoso(resultado) {\r\n    if (resultado.Success) {\r\n        toastr.success(\"Cargado Exitoso\");\r\n        _datosProductos = resultado.Data.Productos;\r\n        _datosTipos = resultado.Data.Tipos;\r\n        mostrarDatosProductos();    \r\n        cargarComboTipos();    \r\n    } else {\r\n        toastr.error(resultado.Mensaje);\r\n    }\r\n}\r\nfunction init() {\r\n    var url = \"producto/obtenerProductos\";\r\n    var tipo = 'GET';\r\n    var datos = {};\r\n    var tipoDatos = 'JSON';\r\n    solicitudAjax(url, getProductosExitoso, datos, tipoDatos, tipo);\r\n}\r\n$(document).ready(function () {\r\n    init();  \r\n    $('#btnAdicionar').click(function () { mostrarModalProducto(); });  \r\n    $('#btnCancelar').click(function () { $('#agregarProducto').modal(\"hide\"); });  \r\n    $(\"#btnGuardar\").click(function () { guardarProducto(0); });\r\n    $('#btnCancelarEliminar').click(function () { $(\"#eliminarProducto\").modal(\"hide\"); });    \r\n});"]}