"use strict";var _datosLibros;function eliminarExitoso(a,i,t){$("#eliminarLibro").modal("hide"),a.Success?($(i.currentTarget).closest("tr").remove(),_datosLibros.remove(t),toastr.success("El Libro'"+t.titulo+" '   se ha eliminado satisfactoriamente")):toastr.error(a.Mensaje)}function confirmarEliminar(i,t){var a={id:t.id};solicitudAjax("/EliminarLibro",function(a){eliminarExitoso(a,i,t)},a,"JSON","POST")}function mostrarEliminarLibro(a,i){var t="#eliminarLibro";$(t).find(".modal-title").html("Eliminar Libro"),$(t).find(".text-mensaje-modal").html("Esta seguro que desea eliminar el Libro '"+i.titulo+"'    ?"),$(t).find(".modal-body").css({"min-height":"100px"}),$(t).modal({backdrop:"static",keyboard:!1}),$(t).modal("show"),$("#btnConfirmarEliminar").unbind("click").click(function(){confirmarEliminar(a,i)})}function guardarLibroExitoso(a,i){if(a.Success){if($("#agregarLibro").modal("hide"),i)i.titulo=$("#txtTitulo").val(),i.autor=$("#txtAutor").val(),i.isbn=$("#txtIsbn").val(),i.idioma=$("#txtIdioma").val(),i.fechapublicacion=$("#txtFechaPublicacion").val(),i.cantpaginas=$("#txtCantPaginas").val();else{var t={id:parseInt(a.Data),titulo:$("#txtTitulo").val(),autor:$("#txtAutor").val(),isbn:$("#txtIsbn").val(),idioma:$("#txtIdioma").val(),fechapublicacion:$("#txtFechaPublicacion").val(),cantpaginas:$("#txtCantPaginas").val()};_datosLibros.push(t)}mostrarDatosLibros(),toastr.success("El Libro se ha guardado satisfactoriamente ")}else toastr.error(a.Mensaje)}function guardarLibro(a,i){var t={id:a,titulo:$("#txtTitulo").val(),autor:$("#txtAutor").val(),isbn:$("#txtIsbn").val(),idioma:$("#txtIdioma").val(),fechapublicacion:$("#txtFechaPublicacion").val(),cantpaginas:$("#txtCantPaginas").val()};solicitudAjax("/GuardarLibro",function(a){guardarLibroExitoso(a,i)},t,"JSON","POST")}function limpiarDatos(){$("#txtTitulo").val(""),$("#txtAutor").val(""),$("#txtIsbn").val(""),$("#txtIdioma").val(""),$("#txtFechaPublicacion").val(""),$("#txtCantPaginas").val(""),$("#btnEditar").hide(),$("#btnGuardar").show()}function mostrarModalLibro(){limpiarDatos();var a="#agregarLibro";$(a).find(".modal-title").html("Adicionar Libro"),$(a).find(".modal-dialog").css({width:"700px"}),$(a).find(".modal-body").css({"min-height":"150px"}),$(a).modal({backdrop:"static",keyboard:!1}),$(a).modal("show")}function editarDatos(a){$("#txtTitulo").val(a.titulo),$("#txtAutor").val(a.autor),$("#txtIsbn").val(a.isbn),$("#txtIdioma").val(a.idioma),$("#txtFechaPublicacion").val(a.fechapublicacion),$("#txtCantPaginas").val(a.cantpaginas),$("#btnEditar").show(),$("#btnGuardar").hide()}function eventoActualizarLibro(a,i){$(a).unbind("click").click(function(){var a="#agregarLibro";editarDatos(i),$(a).find(".modal-title").html("Editar Libro : '"+i.titulo+"'"),$(a).find(".modal-dialog").css({width:"700px"}),$(a).modal({backdrop:"static",keyboard:!1}),$(a).modal("show"),$("#btnEditar").unbind("click").click(function(a){a.preventDefault(),guardarLibro(i.id,i)})})}function formatDate(a){var i=new Date(a),t=i.getFullYear(),o=("0"+(i.getMonth()+1)).slice(-2),r=("0"+i.getDate()).slice(-2);return"".concat(r,"/").concat(o,"/").concat(t)}function mostrarDatosLibros(){limpiarTabla("tblLibro"),$.each(_datosLibros,function(a,i){var t=$("<tr>").attr("id",i.id);t.append(col(i.id).addClass("alinearCentro"));var o=crearSpan("lblEdit"+a,"spanHyperLink",i.titulo);eventoActualizarLibro(o,i),t.append(col(o)),t.append(col(i.autor)),t.append(col(i.isbn)),t.append(col(i.idioma)),t.append(col(formatDate(i.fechapublicacion))),t.append(col(i.cantpaginas)),t.append(col(AccionColumna(function(a){mostrarEliminarLibro(a,i)},"trash","Eliminar")).addClass("alinearCentro")),$("#tblLibro tbody").append(t)})}function getLibrosExitoso(a){a.Success?(toastr.success("Cargado Exitoso"),_datosLibros=a.Data,mostrarDatosLibros()):toastr.error(a.Mensaje)}function init(){solicitudAjax("/obtenerLibros",getLibrosExitoso,{},"JSON","GET")}$(document).ready(function(){init(),$("#btnAdicionar").click(function(){mostrarModalLibro()}),$("#btnCancelar").click(function(){$("#agregarLibro").modal("hide")}),$("#btnGuardar").click(function(){guardarLibro(0)}),$("#btnCancelarEliminar").click(function(){$("#eliminarLibro").modal("hide")})});
//# sourceMappingURL=libro.min.js.map
