{"version":3,"sources":["cliente.js"],"names":["_datosClientes","eliminarExitoso","resultado","e","elemento","modal","Success","$","remove","toastr","success","nombres","error","Mensaje","datos","idcliente","solicitudAjax","response","tipo","find","html","nombre","url","min-height","keyboard","tipoDatos","unbind","click","confirmarEliminar","guardarClienteExitoso","respuesta","ci","val","apellidos","direccion","telefono","correo","fechanacimiento","parseInt","Data","idCliente","limpiarDatos","guardarCliente","hide","show","css","width","editarDatos","eventoActualizarCliente","input","mostrarModalCliente","backdrop","event","preventDefault","formatDate","dateString","date","Date","year","getFullYear","getMonth","slice","day","getDate","concat","mostrarDatosClientes","limpiarTabla","each","index","fila","attr","append","col","addClass","AccionColumna","mostrarEliminarCliente","month","init","crearSpan"],"mappings":"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","file":"cliente.min.js","sourcesContent":["var _datosClientes;\r\nfunction eliminarExitoso(resultado, e, elemento) {\r\n    $(\"#eliminarCliente\").modal(\"hide\");\r\n    if (resultado.Success) {\r\n        $(e.currentTarget).closest('tr').remove();\r\n        _datosClientes.remove(elemento);\r\n        toastr.success(\"El Cliente'\" + elemento.nombres + \r\n            \" '   se ha eliminado satisfactoriamente\");\r\n    } else {\r\n        toastr.error(resultado.Mensaje);\r\n    }\r\n}\r\nfunction confirmarEliminar(e, elemento) {\r\n    var url = \"cliente/EliminarCliente\";\r\n    var tipo = 'POST';\r\n    var datos = { idcliente: elemento.idcliente };\r\n    var tipoDatos = 'JSON';\r\n    solicitudAjax(url, function (response) { eliminarExitoso(response, e, elemento); }\r\n    , datos, tipoDatos, tipo);\r\n}\r\nfunction mostrarEliminarCliente(e, elemento) {\r\n    var modal = '#eliminarCliente';\r\n    $(modal).find(\".modal-title\").html('Eliminar Cliente');\r\n    $(modal).find(\".text-mensaje-modal\").html('Esta seguro que desea eliminar el Cliente '\r\n        + \"'\" + elemento.nombre + \"'    ?\");\r\n    $(modal).find(\".modal-body\").css({ 'min-height': 100 + \"px\" });    \r\n    $(modal).modal({ backdrop: 'static', keyboard: false });\r\n    $(modal).modal(\"show\");\r\n    $(\"#btnConfirmarEliminar\").unbind('click').click(function () {\r\n        confirmarEliminar(e, elemento);\r\n    });    \r\n}\r\nfunction guardarClienteExitoso(respuesta, elemento) {\r\n    if (respuesta.Success) {\r\n        $(\"#agregarCliente\").modal(\"hide\");\r\n        if (elemento) {\r\n            elemento.ci = $(\"#txtCI\").val();\r\n            elemento.nombres = $(\"#txtNombres\").val();\r\n            elemento.apellidos = $(\"#txtApellidos\").val();\r\n            elemento.direccion = $(\"#txtDireccion\").val();\r\n            elemento.telefono = $(\"#txtTelefono\").val();\r\n            elemento.correo = $(\"#txtCorreo\").val();\r\n            elemento.fechanacimiento = $(\"#txtFechaNacimiento\").val();\r\n        } else {\r\n            var tipo = {\r\n                idcliente: parseInt(respuesta.Data),\r\n                ci: $(\"#txtCI\").val(),\r\n                nombres: $(\"#txtNombres\").val(),\r\n                apellidos: $(\"#txtApellidos\").val(),\r\n                direccion: $(\"#txtDireccion\").val(),\r\n                telefono: $(\"#txtTelefono\").val(),\r\n                correo: $(\"#txtCorreo\").val(),\r\n                fechanacimiento: $(\"#txtFechaNacimiento\").val(),\r\n            };\r\n            _datosClientes.push(tipo);\r\n        }            \r\n        mostrarDatosClientes();\r\n        toastr.success(\"El Cliente se ha guardado satisfactoriamente \");\r\n    } else {\r\n        toastr.error(respuesta.Mensaje);\r\n    }    \r\n}\r\nfunction guardarCliente(idCliente, elemento) {\r\n    var url = \"cliente/GuardarCliente\";\r\n    var tipo = 'POST';\r\n    var datos = {\r\n        idcliente: idCliente,\r\n        ci: $(\"#txtCI\").val(),\r\n        nombres: $(\"#txtNombres\").val(),\r\n        apellidos: $(\"#txtApellidos\").val(),\r\n        direccion: $(\"#txtDireccion\").val(),\r\n        telefono: $(\"#txtTelefono\").val(),\r\n        correo: $(\"#txtCorreo\").val(),\r\n        fechanacimiento: $(\"#txtFechaNacimiento\").val(),\r\n    };\r\n    var tipoDatos = 'JSON';\r\n    solicitudAjax(url, function (response) { guardarClienteExitoso(response, elemento); }\r\n        , datos, tipoDatos, tipo);\r\n}\r\nfunction limpiarDatos() {\r\n    $(\"#txtCI\").val(\"\");\r\n    $(\"#txtNombres\").val(\"\");\r\n    $(\"#txtApellidos\").val(\"\");\r\n    $(\"#txtDireccion\").val(\"\");\r\n    $(\"#txtTelefono\").val(\"\");\r\n    $(\"#txtCorreo\").val(\"\");\r\n    $(\"#txtFechaNacimiento\").val(\"\");\r\n    $(\"#btnEditar\").hide();\r\n    $(\"#btnGuardar\").show();\r\n}\r\nfunction mostrarModalCliente() {\r\n    limpiarDatos();\r\n    var modal = '#agregarCliente';    \r\n    $(modal).find(\".modal-title\").html(\"Adicionar Cliente\");\r\n    $(modal).find(\".modal-dialog\").css({ \"width\": 700 + \"px\" });\r\n    $(modal).find(\".modal-body\").css({ 'min-height': 150 + \"px\" });\r\n    $(modal).modal({ backdrop: 'static', keyboard: false });\r\n    $(modal).modal(\"show\");\r\n}\r\nfunction editarDatos(elemento) {\r\n    $(\"#txtCI\").val(elemento.ci);\r\n    $(\"#txtNombres\").val(elemento.nombres);\r\n    $(\"#txtApellidos\").val(elemento.apellidos);\r\n    $(\"#txtDireccion\").val(elemento.direccion);\r\n    $(\"#txtTelefono\").val(elemento.telefono);\r\n    $(\"#txtCorreo\").val(elemento.correo);\r\n    $(\"#txtFechaNacimiento\").val(elemento.fechanacimiento);\r\n    $(\"#btnEditar\").show();\r\n    $(\"#btnGuardar\").hide();\r\n}\r\nfunction eventoActualizarCliente(input, elemento) {\r\n    $(input).unbind('click').click(function () {\r\n        var modal = '#agregarCliente';\r\n        editarDatos(elemento);\r\n        $(modal).find(\".modal-title\").html('Editar Cliente : ' + \"'\" + \r\n            elemento.nombre + \"'\");\r\n        $(modal).find(\".modal-dialog\").css({ 'width': 700 + \"px\" });\r\n        $(modal).modal({ backdrop: 'static', keyboard: false });\r\n        $(modal).modal(\"show\");\r\n        $(\"#btnEditar\").unbind('click').click(function (event) {\r\n            event.preventDefault();\r\n            guardarCliente(elemento.idcliente, elemento);\r\n        });\r\n    });\r\n}\r\n\r\nfunction formatDate(dateString) {\r\n    const date  = new Date(dateString);\r\n    const year  = date.getFullYear();\r\n    const month = ('0' + (date.getMonth() + 1)).slice(-2);\r\n    const day   = ('0' + date.getDate()).slice(-2);\r\n    return `${day}/${month}/${year}`;\r\n}\r\n\r\n\r\nfunction mostrarDatosClientes() {\r\n    limpiarTabla('tblCliente');\r\n    $.each(_datosClientes, function (index, elemento) {\r\n        var fila = $('<tr>').attr('id', elemento.idcliente);\r\n        fila.append(col(elemento.idcliente).addClass(\"alinearCentro\"));\r\n        //fila.append(col(elemento.nombre));\r\n        var input = crearSpan(\"lblEdit\" + index, \"spanHyperLink\", elemento.ci);\r\n        eventoActualizarCliente(input, elemento);\r\n        fila.append(col(input));\r\n        fila.append(col(elemento.nombres ));\r\n        fila.append(col(elemento.apellidos ));\r\n        fila.append(col(elemento.direccion ));\r\n        fila.append(col(elemento.telefono ));\r\n        fila.append(col(elemento.correo ));\r\n        fila.append(col(formatDate(elemento.fechanacimiento )));\r\n        fila.append(col(AccionColumna(function (e) { mostrarEliminarCliente(e, elemento) }\r\n            , 'trash', 'Eliminar')).addClass(\"alinearCentro\"));\r\n        $('#tblCliente tbody').append(fila);\r\n    });\r\n}\r\nfunction getClienteExitoso(resultado) {\r\n    if (resultado.Success) {\r\n        toastr.success(\"Cargado Exitoso\");\r\n        _datosClientes = resultado.Data;\r\n        mostrarDatosClientes();        \r\n    } else {\r\n        toastr.error(resultado.Mensaje);\r\n    }\r\n}\r\nfunction init() {\r\n    var url = \"cliente/obtenerClientes\";\r\n    var tipo = 'GET';\r\n    var datos = {};\r\n    var tipoDatos = 'JSON';\r\n    solicitudAjax(url, getClienteExitoso, datos, tipoDatos, tipo);\r\n}\r\n$(document).ready(function () {\r\n    init();  \r\n    $('#btnAdicionar').click(function () { mostrarModalCliente(); });  \r\n    $('#btnCancelar').click(function () { $('#agregarCliente').modal(\"hide\"); });  \r\n    $(\"#btnGuardar\").click(function () { guardarCliente(0); });\r\n    $('#btnCancelarEliminar').click(function () { $(\"#eliminarCliente\").modal(\"hide\"); });    \r\n});"]}