{"version":3,"sources":["tipo.js"],"names":["_datosTipos","eliminarExitoso","resultado","e","elemento","modal","Success","$","remove","toastr","success","nombre","error","Mensaje","datos","idtipo","solicitudAjax","response","tipo","find","html","url","min-height","keyboard","tipoDatos","unbind","click","confirmarEliminar","guardarTipoExitoso","respuesta","css","val","descripcion","parseInt","Data","push","mostrarDatosTipos","idTipo","show","mostrarModalTipo","limpiarDatos","width","backdrop","hide","input","editarDatos","event","preventDefault","limpiarTabla","index","fila","attr","append","col","addClass","crearSpan","eventoActualizarTipo","mostrarEliminarTipo","getTiposExitoso","guardarTipo","init"],"mappings":"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","file":"tipo.min.js","sourcesContent":["var _datosTipos;\r\nfunction eliminarExitoso(resultado, e, elemento) {\r\n    $(\"#eliminarTipo\").modal(\"hide\");\r\n    if (resultado.Success) {\r\n        $(e.currentTarget).closest('tr').remove();\r\n        _datosTipos.remove(elemento);\r\n        toastr.success(\"El Tipo'\" + elemento.nombre + \r\n            \" '   se ha eliminado satisfactoriamente\");\r\n    } else {\r\n        toastr.error(resultado.Mensaje);\r\n    }\r\n}\r\nfunction confirmarEliminar(e, elemento) {\r\n    var url = \"tipo/EliminarTipo\";\r\n    var tipo = 'POST';\r\n    var datos = { idtipo: elemento.idtipo };\r\n    var tipoDatos = 'JSON';\r\n    solicitudAjax(url, function (response) { eliminarExitoso(response, e, elemento); }\r\n    , datos, tipoDatos, tipo);\r\n}\r\nfunction mostrarEliminarTipo(e, elemento) {\r\n    var modal = '#eliminarTipo';\r\n    $(modal).find(\".modal-title\").html('Eliminar Tipo');\r\n    $(modal).find(\".text-mensaje-modal\").html('Esta seguro que desea eliminar el Tipo '\r\n        + \"'\" + elemento.nombre + \"'    ?\");\r\n    $(modal).find(\".modal-body\").css({ 'min-height': 100 + \"px\" });    \r\n    $(modal).modal({ backdrop: 'static', keyboard: false });\r\n    $(modal).modal(\"show\");\r\n    $(\"#btnConfirmarEliminar\").unbind('click').click(function () {\r\n        confirmarEliminar(e, elemento);\r\n    });    \r\n}\r\nfunction guardarTipoExitoso(respuesta, elemento) {\r\n    if (respuesta.Success) {\r\n        $(\"#agregarTipo\").modal(\"hide\");\r\n        if (elemento) {\r\n            elemento.nombre = $(\"#txtNombre\").val();\r\n            elemento.descripcion = $(\"#txtDescripcion\").val();\r\n        } else {\r\n            var tipo = {\r\n                idtipo: parseInt(respuesta.Data),\r\n                nombre: $(\"#txtNombre\").val(),\r\n                descripcion: $(\"#txtDescripcion\").val(),\r\n            };\r\n            _datosTipos.push(tipo);\r\n        }            \r\n        mostrarDatosTipos();\r\n        toastr.success(\"El Tipo se ha guardado satisfactoriamente \");\r\n    } else {\r\n        toastr.error(respuesta.Mensaje);\r\n    }    \r\n}\r\nfunction guardarTipo(idTipo, elemento) {\r\n    var url = \"tipo/GuardarTipo\";\r\n    var tipo = 'POST';\r\n    var datos = {\r\n        idtipo: idTipo,\r\n        nombre: $(\"#txtNombre\").val(),\r\n        descripcion: $(\"#txtDescripcion\").val(),\r\n    };\r\n    var tipoDatos = 'JSON';\r\n    solicitudAjax(url, function (response) { guardarTipoExitoso(response, elemento); }\r\n        , datos, tipoDatos, tipo);\r\n}\r\nfunction limpiarDatos() {\r\n    $(\"#txtNombre\").val(\"\");\r\n    $(\"#txtDescripcion\").val(\"\");\r\n    $(\"#btnEditar\").hide();\r\n    $(\"#btnGuardar\").show();\r\n}\r\nfunction mostrarModalTipo() {\r\n    limpiarDatos();\r\n    var modal = '#agregarTipo';    \r\n    $(modal).find(\".modal-title\").html(\"Adicionar Tipo\");\r\n    $(modal).find(\".modal-dialog\").css({ \"width\": 700 + \"px\" });\r\n    $(modal).find(\".modal-body\").css({ 'min-height': 150 + \"px\" });\r\n    $(modal).modal({ backdrop: 'static', keyboard: false });\r\n    $(modal).modal(\"show\");\r\n}\r\nfunction editarDatos(elemento) {\r\n    $(\"#txtNombre\").val(elemento.nombre);\r\n    $(\"#txtDescripcion\").val(elemento.descripcion);\r\n    $(\"#btnEditar\").show();\r\n    $(\"#btnGuardar\").hide();\r\n}\r\nfunction eventoActualizarTipo(input, elemento) {\r\n    $(input).unbind('click').click(function () {\r\n        var modal = '#agregarTipo';\r\n        editarDatos(elemento);\r\n        $(modal).find(\".modal-title\").html('Editar Tipo : ' + \"'\" + \r\n            elemento.nombre + \"'\");\r\n        $(modal).find(\".modal-dialog\").css({ 'width': 700 + \"px\" });\r\n        $(modal).modal({ backdrop: 'static', keyboard: false });\r\n        $(modal).modal(\"show\");\r\n        $(\"#btnEditar\").unbind('click').click(function (event) {\r\n            event.preventDefault();\r\n            guardarTipo(elemento.idtipo, elemento);\r\n        });\r\n    });\r\n}\r\nfunction mostrarDatosTipos() {\r\n    limpiarTabla('tblTipo');\r\n    $.each(_datosTipos, function (index, elemento) {\r\n        var fila = $('<tr>').attr('id', elemento.idtipo);\r\n        fila.append(col(elemento.idtipo).addClass(\"alinearCentro\"));\r\n        //fila.append(col(elemento.nombre));\r\n        var input = crearSpan(\"lblEdit\" + index, \"spanHyperLink\", elemento.nombre);\r\n        eventoActualizarTipo(input, elemento);\r\n        fila.append(col(input));\r\n        fila.append(col(elemento.descripcion ));\r\n        fila.append(col(AccionColumna(function (e) { mostrarEliminarTipo(e, elemento) }\r\n            , 'trash', 'Eliminar')).addClass(\"alinearCentro\"));\r\n        $('#tblTipo tbody').append(fila);\r\n    });\r\n}\r\nfunction getTiposExitoso(resultado) {\r\n    if (resultado.Success) {\r\n        toastr.success(\"Cargado Exitoso\");\r\n        _datosTipos = resultado.Data;\r\n        mostrarDatosTipos();        \r\n    } else {\r\n        toastr.error(resultado.Mensaje);\r\n    }\r\n}\r\nfunction init() {\r\n    var url = \"tipo/obtenerTipos\";\r\n    var tipo = 'GET';\r\n    var datos = {};\r\n    var tipoDatos = 'JSON';\r\n    solicitudAjax(url, getTiposExitoso, datos, tipoDatos, tipo);\r\n}\r\n$(document).ready(function () {\r\n    init();  \r\n    $('#btnAdicionar').click(function () { mostrarModalTipo(); });  \r\n    $('#btnCancelar').click(function () { $('#agregarTipo').modal(\"hide\"); });  \r\n    $(\"#btnGuardar\").click(function () { guardarTipo(0); });\r\n    $('#btnCancelarEliminar').click(function () { $(\"#eliminarTipo\").modal(\"hide\"); });    \r\n});"]}